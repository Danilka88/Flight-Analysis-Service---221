# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –ø–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –±—ç–∫–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ—Ç –¥–ª—è —Å–≤–æ–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø**: –§–∞–π–ª [`types.ts`](./types.ts) —è–≤–ª—è–µ—Ç—Å—è **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã** –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö. API –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON, —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞.

---

## 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### `POST /api/v1/auth/login`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π JWT-flow.
-   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ**: `pages/Login.tsx`
-   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
    ```json
    {
      "username": "string",
      "password": "string"
    }
    ```
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–£—Å–ø–µ—Ö `200 OK`)**:
    ```json
    {
      "username": "string",
      "role": "admin" | "operator",
      "accessToken": "string" // –ù–∞–ø—Ä–∏–º–µ—Ä, JWT
    }
    ```
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–û—à–∏–±–∫–∞ `401 Unauthorized`)**:
    ```json
    {
      "error": "string" // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    }
    ```

---

## 2. –û—Å–Ω–æ–≤–Ω—ã–µ –î–∞–Ω–Ω—ã–µ

### `GET /api/v1/analytics/summary`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ì–ª–∞–≤–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è **–î–∞—à–±–æ—Ä–¥–∞** –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã **–û—Ç—á–µ—Ç–æ–≤**. –í—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (—Å—É–º–º—ã, —Å—Ä–µ–¥–Ω–∏–µ, –º–µ–¥–∏–∞–Ω—ã, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –ø–æ–ª–µ—Ç–æ–≤) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.
-   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ**: `store/dataSlice.ts`
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (`200 OK`)**: JSON-–æ–±—ä–µ–∫—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `DataState` –∏–∑ [`types.ts`](./types.ts).

    ```json
    {
      "regions": [ /* –º–∞—Å—Å–∏–≤ RegionData[] */ ],
      "timeSeries": [ /* –º–∞—Å—Å–∏–≤ TimeSeriesData[] */ ],
      "hourlyDistribution": [ /* –º–∞—Å—Å–∏–≤ HourlyData[] */ ],
      "totalFlights": 6560,
      "avgFlightDuration": 68,
      "peakLoad": 82,
      "avgDailyFlights": 218,
      "medianDailyFlights": 215,
      "monthlyChange": 15.5
    }
    ```

### `GET /api/v1/flights`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª–µ—Ç–æ–≤ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã **"–ü–æ–ª–µ—Ç—ã"**.
-   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ**: `store/flightsSlice.ts`
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (`200 OK`)**: –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `Flight[]` –∏–∑ [`types.ts`](./types.ts).

    ```json
    [
      { /* –æ–±—ä–µ–∫—Ç Flight */ },
      { /* –æ–±—ä–µ–∫—Ç Flight */ },
      ...
    ]
    ```

#### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–∞

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–µ—Ç–∞–ª–µ–π –ø–æ–ª–µ—Ç–∞ (`FlightDetailPage`) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è SVG-—Å—Ö–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∞. –≠—Ç–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ–±—ä–µ–∫—Ç–µ `Flight`. –ù–∏–∫–∞–∫–æ–≥–æ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ**, —á—Ç–æ–±—ã –±—ç–∫–µ–Ω–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª RAW-—Ç–µ–ª–µ–≥—Ä–∞–º–º—ã –∏ –∑–∞–ø–æ–ª–Ω–∏–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è –≤ `parsed_data`:

-   **`parsed_data.SHR.–ú–∞—Ä—à—Ä—É—Ç.zona`**: –û–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∑–æ–Ω—É –ø–æ–ª–µ—Ç–∞. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞:
    -   **–ü–æ–ª–∏–≥–æ–Ω**:
        ```json
        {
          "type": "polygon",
          "coordinates": [
            { "latitude": 56.76, "longitude": 62.03 },
            { "latitude": 56.76, "longitude": 62.05 },
            ...
          ]
        }
        ```
    -   **–†–∞–¥–∏—É—Å**:
        ```json
        {
          "type": "radius",
          "radius_km": 0.5,
          "center": { "latitude": 44.13, "longitude": 43.13 }
        }
        ```
    -   –ï—Å–ª–∏ –∑–æ–Ω–∞ –∑–∞–¥–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ –∏–º–µ–Ω–∏ (`type: 'name'`), –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω—ã –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞.

-   **`parsed_data.DEP.coordinates`**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–ª–µ—Ç–∞ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏.
    ```json
    { "latitude": 59.95, "longitude": 29.08 }
    ```

-   **`parsed_data.ARR.coordinates`**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–ª–µ—Ç–∞ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏.
    ```json
    { "latitude": 59.63, "longitude": 29.76 }
    ```

---

## 3. AI-–ê–Ω–∞–ª–∏–∑

### `POST /api/v1/ai/analyze`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–¥–æ–∫ –æ—Ç —è–∑—ã–∫–æ–≤–æ–π –º–æ–¥–µ–ª–∏ (LLM).
-   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ**: `pages/Dashboard.tsx`, `pages/Reports.tsx`, `pages/FlightsListPage.tsx`, `pages/FlightDetailPage.tsx`.
-   **üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ë—ç–∫–µ–Ω–¥ **–æ–±—è–∑–∞–Ω** –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–∞–Ω–∞—Ü–∏—é HTML-–æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å XSS-–∞—Ç–∞–∫–∏. –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ–≥–∏: `<p>`, `<ul>`, `<li>`, `<strong>`, `<em>`.

-   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
    ```json
    {
      "widgetType": "string",
      "data": "any"
    }
    ```
    -   `widgetType`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∏–¥–∂–µ—Ç–∞ (`"map"`, `"timeseries"`, `"totalFlights"`, `"report"` –∏ —Ç.–¥.).
    -   `data`: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (—Å–º. –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤).

-   **–õ–æ–≥–∏–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**:
    1.  –ü–æ–ª—É—á–∏—Ç—å `widgetType` –∏ `data`.
    2.  –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM –Ω–∞ –æ—Å–Ω–æ–≤–µ `widgetType` –∏ `data`.
    3.  –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ LLM (Ollama, OpenRouter, Gemini API –∏ —Ç.–¥.).
    4.  –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç.
    5.  **–û—á–∏—Å—Ç–∏—Ç—å (—Å–∞–Ω–∏—Ä–æ–≤–∞—Ç—å) HTML-–æ—Ç–≤–µ—Ç.**
    6.  –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (`200 OK`)**:
    ```json
    {
      "analysis": "string" // HTML-—Å—Ç—Ä–æ–∫–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∞–Ω–∞–ª–∏–∑–∞
    }
    ```

-   **–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)**:
    > –¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç-–∞–Ω–∞–ª–∏—Ç–∏–∫ –ø–æ –ø–æ–ª–µ—Ç–Ω—ã–º –¥–∞–Ω–Ω—ã–º –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –ë–ü–õ–ê. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫—Ä–∞—Ç–∫–∏–µ, –Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–æ–¥–∫–∏. –í—ã–¥–µ–ª—è–π 2-3 –∫–ª—é—á–µ–≤—ã—Ö –∏–Ω—Å–∞–π—Ç–∞. –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω –≤ –≤–∏–¥–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ HTML —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–≥–æ–≤ `<p>`, `<ul>`, `<li>`, `<strong>`.

---

## 4. –ó–∞–≥—Ä—É–∑–∫–∞ –î–∞–Ω–Ω—ã—Ö

### `POST /api/v1/upload`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∞–π–ª —Å –ø–∞–∫–µ—Ç–æ–º –ø–æ–ª–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏. –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–∑–ª–∏—á–∞—Ç—å —Ç–∏–ø —Ñ–∞–π–ª–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞.
-   **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–¥–µ**: `components/FileUploader.tsx`.
-   **–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: `multipart/form-data`.
-   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: –§–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º `file`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π —Ñ–∞–π–ª (`.xlsx`, `.json`, `.xml` –∏ —Ç.–¥.).

-   **–õ–æ–≥–∏–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**:
    -   **–ï—Å–ª–∏ —Ñ–∞–π–ª `.xlsx`**: –ë—ç–∫–µ–Ω–¥ (FastAPI) –¥–æ–ª–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ñ–∞–π–ª –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ JSON.
    -   **–î–ª—è –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–æ–ª—å—à–∏—Ö XML/JSON, —Ç—Ä–µ–±—É—é—â–∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏): –ë—ç–∫–µ–Ω–¥ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏ –≤–µ—Ä–Ω—É—Ç—å `taskId`.

-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–£—Å–ø–µ—Ö `200 OK` –¥–ª—è XLSX)**:
    JSON-–º–∞—Å—Å–∏–≤ —Å —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—è–º –¥–∞–Ω–Ω—ã—Ö –∏–∑ `types.ts`.
    ```json
    [
      { "flightId": "UUEE-USSS-1", "aircraft": "A320", "status": "parsed_from_xlsx" },
      { "flightId": "UUEE-ULLI-2", "aircraft": "B738", "status": "parsed_from_xlsx" }
    ]
    ```

-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–£—Å–ø–µ—Ö `202 Accepted` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)**:
    ```json
    {
      "message": "File accepted for processing.",
      "taskId": "string" // ID –∑–∞–¥–∞—á–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    }
    ```
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (–û—à–∏–±–∫–∞ `400 Bad Request`)**:
    ```json
    {
      "error": "Invalid file format or data."
    }
    ```

---

## 5. –ì–µ–æ–¥–∞–Ω–Ω—ã–µ (–ö–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—è)

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º–∞—Ç–∏—á–Ω–æ–π –∫–∞—Ä—Ç—ã –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –≥–µ–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ (–ì–ò–°) —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—è–º–∏ –ø–æ–ª–µ—Ç–æ–≤.

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

-   **–ö–∞—Ä—Ç–∞**: `components/InteractiveMap.tsx` ‚Äî —ç—Ç–æ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π SVG-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∞. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (`coords`) –≤ `RegionData` —è–≤–ª—è—é—Ç—Å—è —É—Å–ª–æ–≤–Ω—ã–º–∏ –∏ —Å–ª—É–∂–∞—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä—É–≥–æ–≤.
-   **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –†–∞–∑–¥–µ–ª "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö" –≤ `pages/AdminPanel.tsx` —è–≤–ª—è–µ—Ç—Å—è –º–∞–∫–µ—Ç–æ–º (placeholder) –∏ –Ω–µ –∏–º–µ–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

### –¢—Ä–µ–±—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö: GeoJSON

–î–ª—è –≤—Å–µ—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å –≥–µ–æ–¥–∞–Ω–Ω—ã–º–∏ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è GeoJSON**. –û–Ω –Ω–∞—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.

**–ó–∞–¥–∞—á–∞ –±—ç–∫–µ–Ω–¥–∞**: –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Esri Shapefile), –∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ GeoJSON** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.

### –ù–æ–≤—ã–µ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### `GET /api/v1/geo/regions`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã —Ä–µ–≥–∏–æ–Ω–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ.
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (`200 OK`)**: GeoJSON `FeatureCollection`, –≥–¥–µ –∫–∞–∂–¥–∞—è `Feature` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–¥–∏–Ω —Ä–µ–≥–∏–æ–Ω —Å –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π `Polygon`.
-   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
    ```json
    {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "geometry": {
            "type": "Polygon",
            "coordinates": [
              [ [37.6, 55.7], [37.7, 55.7], [37.7, 55.8], [37.6, 55.8], [37.6, 55.7] ]
            ]
          },
          "properties": {
            "id": "MSK",
            "name": "–ú–æ—Å–∫–≤–∞ –∏ –æ–±–ª–∞—Å—Ç—å",
            "flightCount": 1250
          }
        }
      ]
    }
    ```

#### `GET /api/v1/flights/:sid/trajectory`

-   **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –ø–æ–ª–µ—Ç–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ SID.
-   **–¢–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ (`200 OK`)**: GeoJSON `Feature` —Å –≥–µ–æ–º–µ—Ç—Ä–∏–µ–π `LineString`.
-   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
    ```json
    {
      "type": "Feature",
      "geometry": {
        "type": "LineString",
        "coordinates": [
          [37.61, 55.75],
          [37.62, 55.76],
          [37.63, 55.75]
        ]
      },
      "properties": {
        "sid": "7772266363",
        "aircraft_type": "BLA"
      }
    }
    ```

### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1.  **–ë—ç–∫–µ–Ω–¥**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–≤–∞ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (`/api/v1/geo/regions` –∏ `/api/v1/flights/:sid/trajectory`), –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ GeoJSON.
2.  **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `InteractiveMap.tsx` –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Leaflet) –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–µ —Å –Ω–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏.